id: htra_source
label: "HTRA: IQ Source"
category: "[HTRA]"
templates:
  imports: import htra_source
  make: htra_source.htra_source("${device_type}",${device_num},"${device_ip}",${center_freq}, ${sample_rate}, htra_source.DecimationFactor.${decim_factor}, ${ref_level},"${data_format}")
  callbacks:
    - set_center_freq(${center_freq})
    - set_sample_rate(${sample_rate})
    - set_decim_factor(htra_source.DecimationFactor.${decim_factor})
    - set_ref_level(${ref_level})
parameters:
  - id: device_type
    label: "Physical Interface"
    dtype: enum
    options: ["USB", "ETH"]
    option_labels: ["USB", "ETH"]
    default: "USB"

  - id: device_num
    label: "Device Number"
    dtype: int
    default: 0
    hide: ${'none' if device_type == 'USB' else 'all'}

  - id: device_ip
    label: "IP Address"
    dtype: string
    default: "192.168.1.100"
    hide: ${'none' if device_type == 'ETH' else 'all'}

  - id: center_freq
    label: Center Frequency (Hz)
    dtype: float
    default: 1000000000
  - id: sample_rate
    label: Sample rate (Hz)
    dtype: float
    default: 125000000
  - id: decim_factor
    label: Decimate Factor
    dtype: enum
    default: DECIM_32
    options:
      - DECIM_1
      - DECIM_2
      - DECIM_4
      - DECIM_8
      - DECIM_16
      - DECIM_32
      - DECIM_64
      - DECIM_128
      - DECIM_256
      - DECIM_512
      - DECIM_1024
      - DECIM_2048
      - DECIM_4096
    option_labels:
      - "1"
      - "2"
      - "4"
      - "8"
      - "16"
      - "32"
      - "64"
      - "128"
      - "256"
      - "512"
      - "1024"
      - "2048"
      - "4096"
  - id: ref_level
    label: Reference Level (dBm)
    dtype: float
    default: 0
  - id: data_format
    label: "Data Format"
    dtype: enum
    default: "Complex16bit"
    options:
      - "Complex8bit"
      - "Complex16bit"
      - "Complex32bit"
    option_labels:
      - "8bit"
      - "16bit"
      - "32bit"
inputs: []
outputs:
  - label: out
    domain: stream
    dtype: complex
file_format: 1
